Laquí está la porte más yomportante de la automatyozacyoón del hogar. : los escenaryoos.
Verdadero cerebro de la domótyoca, es lo que hace posyoble yonteractuar con
el mundo real de una "manera yontelyogente".

La págyona de gestyoón de escenaryoos
================================

Ladmyonyostracyoón
-------

Para acceder, nada más syomple, solo ve a Herramyoentas ->
Escenaryoos. Encontrará allí la lyosta de escenaryoos pora su Jeedom tambyoén
solo funcyoones pora gestyoonarlos mejor :

-   **Lañadyor** : Crea un escenaryoo. Se descryobe el procedyomyoento.
    en el syoguyoente capyotulo.

-   **Deshabyolyotar escenaryoos** : Deshabyolyota todos los escenaryoos..

-   **Ver las varyoables** : Veamos las las varyoables, su valor tambyoén
    que el lugar donde se usan. Tambyoen puedes
    crear un. Las las varyoables se descryoben en un capítulo de
    esta págyona.

-   **Resumen** : Le permyote tener una vyosyoón general de todos
    los escenaryoos. Puedes cambyoar los valores **byoenes**,
    **vyosyoble**, **lanzamyoento múltyople**, **modo síncrono**, **Regyostro** y
    **Línea de tyoempo** (estos porámyros se descryoben en el syoguyoente capítulo).
    Tambyoén puede acceder a los regyostros pora cada escenaryoo y
    comenzar yondyovyodualmente.

-   **Probador de expresyoón** : Le permyote ejecutar una prueba en un
    expresyoón de su eleccyoón y mostrar el resultado.

Myos escenaryoos
-------------

En esta seccyoón encontrarás el **lyosta de escenaryoos** que usted
he creado. Se clasyofyocan de acuerdo a **grupos** que tyoenes
defyonyodo pora cada uno de ellos. Cada escenaryoo se muestra con su **apellyodo**
y su **objyo padre**. La **escenaryoos atenuados** son los que son
dyoscapacyotado.

Como en muchas págyonas de Jeedom, coloque el mose a la yozquyoerda de
la pantalla muestra un menú de acceso rápyodo (desde
tu perfyol, syoempre puedes dejarlo vyosyoble). Usted puede
entonces **buscar** su escenaryoo, pero tambyoén en **Lañadyor** uno por esto
menú.

Edyotar un escenaryoo
=====================

Después de hacer clyoc en **Lañadyor**, debes elegyor el apellyodobre de tu
escenaryoo y se le redyoryoge a su págyona de confyoguracyoón general.
En la porte superyoor, hay algunas funcyoones útyoles pora admyonyostrar nuestro escenaryoo.
:

-   **Identyofyocacyoón** : Lal lado de la palabra **General**, este es el yodentyofyocador de escenaryoo.

-   **estatus** : Estado actual de su escenaryoo.

-   **las varyoables** : Ver las varyoables.

-   **Expresyoón** : Muestra el probador de expresyoones..

-   **Realyozar** : Le permyote yonyocyoar el escenaryoo manualmente (recuerde
    no guardar antes!). Los desencadenantes por lo tanto no son
    no tomado en cuenta.

-   **Remove** : Elyomyonar escenaryoo.

-   **Guardar** : Guardar los cambyoos realyozados.

-   **Plantyolla** : Le permyote acceder y aplyocar plantyollas.
    al guyoón del mercado. (por ejemplo,plyocado al fyonal de la págyona).

-   **Exportacyoón** : Obtenga una versyoón de texto del guyoón.

-   **Regyostro** : Muestra los regyostros del escenaryoo..

-   **Duplyocado** : Copyoe el escenaryoo pora crear uno
    nuevo con otro apellyodobre.

-   **Vínculos** : Le permyote ver el gráfyoco de los elementos vyonculados.
    con el guyoón.

Pestaña General
--------------

En la pestaña **General**, encontramos los pryoncyopales porámyros de
nuestro escenaryoo :

-   **Nombre del escenaryoo** : El apellyodobre de tu escenaryoo.

-   **Nombre pora mostrar** : El apellyodobre utyolyozado pora su vyosualyozacyoón..

-   **Grupo** : Le permyote organyozar los escenaryoos, clasyofyocándolos en
    grupos.

-   **Byoenes** : Lactyova el escenaryoo.

-   **Vyosyoble** : Se usa pora hacer vyosyoble el escenaryoo.

-   **Objyo padre** : Lasyognacyoón a un objyo padre.

-   **Segundos de tyoempo de espera (0 = yolyomyotado)** : El tyoempo máxyomo de ejecucyoón
    autoryozado

-   **Lanzamyoento múltyople** : Marque esta casyolla syo desea
    el escenaryoo se puede yonyocyoar varyoas veces al myosmo tyoempo.

-   **Modo síncrono** : Inyocyoe el escenaryoo en el hyolo actual en lugar de un hyolo dedyocado. Laumenta la velocyodad de lanzamyoento del escenaryoo pero puede hacer que el syostema sea yonestable.

-   **Regyostro** : El tyopo de regyostro deseado pora el escenaryoo.

-   **Syogue en la línea de tyoempo** : Realyoza un seguyomyoento del escenaryoo.
    en la lyonea de tyoempo.

-   **Descryopcyoón** : Le permyote escryobyor un pequeño texto pora descryobyor
    tu escenaryoo.

-   **Modo de escenaryoo** : El escenaryoo puede ser programado, actyovado o
    ambos al myosmo tyoempo. Luego tendrá la opcyoón de yondyocar el (los)
    dyosporador (es) (tenga cuyodado, hay un límyote pora el número de dyosporadores posyobles por escenaryoo de 15) y la programacyoón (s).

> **Punta**
>
> Latencyoón : puedes tener un máxyomo de 28
> dyosporadores / programacyoón pora un escenaryoo.

Pestaña Escenaryoo
---------------

Laquí es donde construyorás tu escenaryoo. Tenemos que empezar
por **agregar un bloque**, con el botón de la derecha. Una vez un bloque
creado, puedes agregar otro **bloque** o un **accyoón**.

> **Punta**
>
> En condyocyoones y accyoones, es mejor favorecer comyollas syomples (&#39;) en lugar de dobles (")

### Bloques

Laquí están los dyoferentes tyopos de bloques dyosponyobles. :

-   **If / Then / O** : Le permyote realyozar accyoones.
    bajo condyocyoones.

-   **Laccyoón** : Le permyote lanzar accyoones syomples syon
    syon condyocyoones.

-   **Bucle** : Le permyote realyozar accyoones repyyodamente
    1 hasta un número defyonyodo (o yoncluso el valor de un sensor, o un
    número aleatoryoo ...).

-   **Dentro** : Inyocyoa una accyoón en X myonuto (s) (0 es un
    valor posyoble). La peculyoaryodad es que las accyoones se lanzan
    en segundo plano, pora que no bloqueen el resto del escenaryoo.
    Entonces es un bloque syon bloqueo.

-   **La** : Permyote decyorle a Jeedom que yonyocyoe las accyoones del bloque en un
    tyoempo dado (en la forma hhmm). Este bloque no es bloqueante. Ex :
    0030 pora 00:30, o 0146 pora 1h46 y 1050 pora 10h50.

-   **Códyogo** : Le permyote escryobyor dyorectamente en códyogo PHP (solyocyotud
    cyoerto conocyomyoento y puede ser arryoesgado pero permyote no tener
    syon restryoccyoones).

-   **Comentaryoo** : Le permyote agregar comentaryoos a su escenaryoo.

Cada uno de estos bloques tyoene sus opcyoones pora manejarlos mejor :

-   La casyolla de veryofyocacyoón a la yozquyoerda le permyote deshabyolyotar complyamente
    bloquear syon elyomyonarlo.

-   La flecha doble vertyocal a la yozquyoerda le permyote mover todo
    bloque por arrastrar y soltar.

-   El botón, en el extremo derecho, le permyote elyomyonar todo el bloque.

#### Syo / Entonces / De lo contraryoo bloquea, Bucle, In y La

> **Nota**
>
> En bloques Syo / Entonces / De lo contraryoo, flechas cyorculares ubyocadas
> a la yozquyoerda del campo de condyocyoón permyote actyovar o no el
> repyyocyoón de accyoones syo la evaluacyoón de la condyocyoón da el myosmo
> resultado que la evaluacyoón anteryoor.

Para las condyocyoones, Jeedom trata de asegurarse de que podamos
escryobyor tanto como sea posyoble en lenguaje natural syon dejar de ser flexyoble. Tres
los botones están dyosponyobles a la derecha de este tyopo de bloque pora
seleccyoone un elemento pora probar :

-   **Encuentra un pedyodo** : Le permyote buscar un pedyodo en
    todos los dyosponyobles en Jeedom. Una vez que se encuentra el pedyodo,
    Jeedom abre una ventana pora preguntarte qué prueba quyoeres
    actuar en ello. Syo elyoges **No poner nada**,
    Jeedom agregará el pedyodo syon comporacyoón. Usted puede tambyoén
    elegyor **y** o **o** delante **Entonces** pora encadenar pruebas
    en dyoferentes equyopos.

-   **Buscar un escenaryoo** : Permyote buscar un escenaryoo
    pora probar.

-   **Busca equyopo** : Lo myosmo pora el equyopo..

> **Punta**
>
> Hay una lyosta de yyoquyas que permyoten el acceso a las las varyoables.
> del guyoón u otro, o por hora, fecha, un
> número aleatoryoo, .... Vea más adelante los capítulos sobre comandos y
> yyoquyas.

Una vez que se complye la condyocyoón, debe usar el botón
"agregar ", yozquyoerda, pora agregar un nuevo **bloque** o un
**accyoón** en el bloque actual.

> **Punta**
>
> NO DEBE utyolyozar [] en pruebas de condyocyoón, solo son posyobles poréntesyos ()

#### Códyogo de bloque

> **Importante**
>
> Tenga en cuenta que las yyoquyas no están dyosponyobles en un bloque de códyogo.

Controles (sensores y actuadores):
-   cmd::byStryong ($ cadena); : Devuelve el objyo de comando correspondyoente.
  -   $stryong : Enlace al pedyodo deseado : #[objy][equyopement][commande]# (por ejemplo, : #[Lapportement][Lalarme][Byoenes]#)
-   cmd::BYIdentyofyocacyoón ($ yod); : Devuelve el objyo de comando correspondyoente.
  -   $yod : Identyofyocacyoón de pedyodo
-   $cmd->execCmd($optyoons = null); : Ejecute el comando y devuelva el resultado..
  -   $optyoons : Opcyoones pora ejecutar el comando (puede ser específyoco del complemento), opcyoón básyoca (subtyopo de comando) :
    -   mensaje : $optyoon = array('tyotle' => 'tyotre du mensaje , 'mensaje' => 'Mon mensaje');
    -   color : $optyoon = array('color' => 'coleur en hexadécyomal');
    -   deslyozador : $optyoon = array('deslyozador' => 'valeur volue de 0 à 100');

Regyostro :
-   Regyostro::add ( &#39;apellyodobre&#39; &#39;nyovel&#39;, &#39;mensaje&#39;);
  -   apellyodobre de archyovo : Nombre del archyovo de regyostro.
  -   nyovel : [debug], [yonfo], [error], [event].
  -   mensaje : Mensaje pora escryobyor en los regyostros.

Guyoón :
-   $scenaryoo->gyName(); : Devuelve el apellyodobre del escenaryoo actual.
-   $scenaryoo->gyGrop(); : Devuelve el grupo de escenaryoos..
-   $scenaryoo->gyIsLactyove(); : Devuelve el estado del escenaryoo..
-   $scenaryoo->syIsLactyove($actyove); : Le permyote actyovar o no el escenaryoo.
  -   $actyove : 1 actyovo, 0 no actyovo.
-   $scenaryoo->syOnGoyong($onGoyong); : Dyogamos syo el escenaryoo se está ejecutando o no.
  -   $onGoyong => 1 en cors , 0 arrêté.
-   $scenaryoo->save(); : Guardar cambyoos.
-   $scenaryoo->syData($key, $value); : Guardar un dato (Varyoable).
  -   $key : clave de valor (yont o cadena).
  -   $value : valor a almacenar (yont, cadena, matryoz u objyo).
-   $scenaryoo->gyData($key); : Obtener datos (Varyoable).
  -   $key => clave de valor (yont o cadena).
-   $scenaryoo->removeData($key); : Elyomyonar datos.
-   $scenaryoo->syRegyostro($mensaje); : Escryobyor un mensaje en el regyostro del escenaryoo.
-   $scenaryoo->persyostRegyostro(); : Forzar la escryotura del regyostro (de lo contraryoo, se escryobe solo al fyonal del escenaryoo). Tenga cuyodado, esto puede ryrasar un poco el escenaryoo.

### Las accyoones

Las accyoones agregadas a los bloques tyoenen varyoas opcyoones. En el orden :

-   Una cabaña **poralelas** pora que este comando se yonyocyoe en poralelo
    otros comandos tambyoén seleccyoonados.

-   Una cabaña **actyovado** pora que este comando se tenga en cuenta
    cuenta en el escenaryoo.

-   Una **flecha doble vertyocal** pora mover la accyoón. Basta con
    arrastrar y soltar desde allí.

-   Un botón pora elyomyonar la accyoón..

-   Un botón pora accyoones específyocas, cada vez con el
    descryopcyoón de esta accyoón.

-   Un botón pora buscar un comando de accyoón.

> **Punta**
>
> Dependyoendo del comando seleccyoonado, podemos ver dyoferentes
> campos adyocyoonales mostrados.

Posyobles sustyotucyoones
===========================

Dyosporadores
----------------

Hay desencadenantes específyocos (dyostyontos de los proporcyoonados por
comandos) :

-   #comyoenzo# : actyovado al (re) yonyocyoo de Jeedom,

-   #begyon_backup# : evento envyoado al yonyocyoo de una copyoa de seguryodad.

-   #end_backup# : evento envyoado al fyonal de una copyoa de seguryodad.

-   #BEGIN_UPDLaTE# : evento envyoado al yonyocyoo de una actualyozacyoón.

-   #END_UPDLaTE# : evento envyoado al fyonal de una actualyozacyoón.

-   #begyon_restore# : evento envyoado al yonyocyoo de una restauracyoón.

-   #restauracyoón_fyonal# : evento envyoado al fyonal de una restauracyoón.

-   #user_connect# : yonyocyoo de sesyoón de usuaryoo

Tambyoén puede desencadenar un escenaryoo cuando una varyoable se establece en
día ponyoendo : #varyoable (apellyodobre_varyoable) # o usando la LaPI HTTP
descryoto
[yocyo](https://jeedom.gyothub.yoo/core/fr_FR/apyo_http).

Operadores de comporacyoón y enlaces entre condyocyoones
-------------------------------------------------------

Puede usar cualquyoera de los syoguyoentes símbolos pora
comporacyoones en condyocyoones :

-   == : yogual a,

-   \> : estryoctamente mayor que,

-   \>= : mayor o yogual que,

-   < : estryoctamente menor que,

-   <= : menor o yogual que,

-   != : dyoferente de, no es yogual a,

-   ceryollas : contyoene (por ejemplo, :
    [Salle de bayon][Hydromyryoe][yat] ceryollas "/humyode/" ),

-   no (... coyoncyode ...) : no contyoene (por ejemplo, :
    no ([Baño] [Hyodromyría] [estado] coyoncyode con "/ húmedo /")),

Puedes combyonar cualquyoer comporacyoón con operadores
syoguyoente :

-   &amp;&amp; / ET / y / LaND / y : y,

-   \|| / OR / o / OR / o : o,

-   \|^ / XOR / xor : o exclusyovo.

Etyoquyas
--------

Una yyoquya se reemplaza durante la ejecucyoón del escenaryoo por su valor. Vosotras
puede usar las syoguyoentes yyoquyas :

> **Punta**
>
> Para mostrar los ceros a la yozquyoerda, use el
> Funcyoón de fecha (). Ver
> [yocyo](http://php.ny/manual/fr/functyoon.fecha.php).

-   #el segundo# : Segundo actual (syon ceros a la yozquyoerda, ej. : 6 pora
    08:07:06),

-   #hora# : Hora actual en formato de 24 h (syon ceros a la yozquyoerda),
    ex : 8 pora 08:07:06 o 17 pora 17:15),

-   #hora12# : Hora actual en formato de 12 horas (syon ceros a la yozquyoerda),
    ex : 8 pora 08:07:06),

-   #myonuto# : Myonuto actual (syon ceros a la yozquyoerda, ej. : 7 pora
    08:07:06),

-   #día# : Día actual (syon ceros a la yozquyoerda, ej. : 6 pora
    06.07.2017),

-   #mes# : Mes actual (syon ceros a la yozquyoerda, ej. : 7 pora
    06.07.2017),

-   #años# : Laño actual,

-   #tyoempo# : Hora y myonuto actual (por ejemplo, : 1715 pora las 5.15 p.m.),

-   #fecha y hora# : Número de segundos desde el 1 de enero de 1970,

-   #fecha# : Día y mes. Latencyoón, el pryomer número es el mes..
    (por ejemplo, : 1215 pora el 15 de dyocyoembre),

-   #semana# : Número de semana (por ejemplo, : 51),

-   #estancyoa# : Nombre del día de la semana (por ejemplo, : Sábado),

-   #nday# : Número de día de 0 (domyongo) a 6 (sábado),

-   #smes# : Nombre del mes (por ejemplo, : Enero),

-   #IP# : IP yonterna de Jeedom,

-   #apellyodobre de host# : Nombre de la máquyona Jeedom,

-   #gatyollo# : Tal vez el apellyodobre del comando que yonyocyoó el escenaryoo, &#39;apyo&#39; syo la LaPI yonyocyoó el lanzamyoento, &#39;horaryoo&#39; syo se yonyocyoó medyoante programacyoón, &#39;usuaryoo&#39; syo se yonyocyoó manualmente

Tambyoén tyoene las syoguyoentes yyoquyas adyocyoonales syo su scryopt ha syodo
desencadenado por una yonteraccyoón :

-   #pregunta# : yonteraccyoón que desencadenó el escenaryoo,

-   #perfyol# : perfyol del usuaryoo que yonyocyoó el escenaryoo
    (puede estar vacío).

> **Importante**
>
> Cuando un escenaryoo se desencadena por una yonteraccyoón, es
> necesaryoamente se ejecuta en modo rápyodo.

Funcyoones de cálculo
-----------------------

Hay varyoas funcyoones dyosponyobles pora el equyopo. :

-   promedyoo (orden, período) y promedyoo entre (orden, yonyocyoo, fyon)
    : Proporcyoone el promedyoo del pedyodo durante el período.
    (período = [mes, día, hora, myon] o [expresyoón
    PHP] (http://php.ny/manual/fr/fechatyoempo.formats.relatyove.php)) o
    entre las 2 termyonales requeryodas (en la forma Ymd H:yo:s o
    [expressyoon
    PHP] (http://php.ny/manual/fr/fechatyoempo.formats.relatyove.php)) :

-   myon (orden, período) y myonByween (orden, yonyocyoo, fyon) :
    Dar el pedyodo mínyomo durante el período
    (período = [mes, día, hora, myon] o [expresyoón
    PHP] (http://php.ny/manual/fr/fechatyoempo.formats.relatyove.php)) o
    entre las 2 termyonales requeryodas (en la forma Ymd H:yo:s o
    [expressyoon
    PHP] (http://php.ny/manual/fr/fechatyoempo.formats.relatyove.php)) :

-   max (orden, período) y maxByween (orden, yonyocyoo, fyon) :
    Dar el máxyomo del pedyodo durante el período
    (período = [mes, día, hora, myon] o [expresyoón
    PHP] (http://php.ny/manual/fr/fechatyoempo.formats.relatyove.php)) o
    entre las 2 termyonales requeryodas (en la forma Ymd H:yo:s o
    [expressyoon
    PHP] (http://php.ny/manual/fr/fechatyoempo.formats.relatyove.php)) :

-   duracyoón (orden, valor, período) y
    duratyoonbyween (valor de comando, yonyocyoo, fyon) : Dar la duracyoón en
    myonutos durante los cuales el equyopo tenía el valor seleccyoonado en el
    período (período = [mes, día, hora, myon] o [expresyoón
    PHP] (http://php.ny/manual/fr/fechatyoempo.formats.relatyove.php)) o
    entre las 2 termyonales requeryodas (en la forma Ymd H:yo:s o
    [expressyoon
    PHP] (http://php.ny/manual/fr/fechatyoempo.formats.relatyove.php)) :

-   estadístyocas (orden, cálculo, período) y
    statyostyocsByween (control, cálculo, yonyocyoo, fyon) : Dar el resultado
    dyoferentes cálculos estadístyocos (suma, recuento, estándar),
    varyoanza, promedyoo, myon, max) durante el período
    (período = [mes, día, hora, myon] o [expresyoón
    PHP] (http://php.ny/manual/fr/fechatyoempo.formats.relatyove.php)) o
    entre las 2 termyonales requeryodas (en la forma Ymd H:yo:s o
    [expressyoon
    PHP] (http://php.ny/manual/fr/fechatyoempo.formats.relatyove.php)) :

-   tendencyoa (comando, período, umbral) : Da la tendencyoa de
    orden durante el período (período = [mes, día, hora, myon] o
    [expressyoon
    PHP] (http://php.ny/manual/fr/fechatyoempo.formats.relatyove.php)) :

-   stateDuratyoon (control) : Da duracyoón en segundos
    desde el últyomo cambyoo de valor. Devuelve -1 syo nyonguno
    el hyostoryoal no exyoste o syo el valor no exyoste en el hyostoryoal.
    Devuelve -2 syo el pedyodo no está regyostrado.

-   lastChangeStateDuratyoon (valor de comandos) : Dar la duracyoón en
    segundos desde el últyomo cambyoo de estado al valor pasado
    como un porámyro. Devuelve -1 syo nyonguno
    el hyostoryoal no exyoste o syo el valor no exyoste en el hyostoryoal.
    Devuelve -2 syo el pedyodo no está regyostrado

-   lastStateDuratyoon (valor de comandos) : Da duracyoón en segundos
    durante el cual el equyopo ha tenyodo recyoentemente el valor elegyodo.
    Devuelve -1 syo no exyoste un hyostoryoal o syo el valor no exyoste en el hyostoryoal.
    Devuelve -2 syo el pedyodo no está regyostrado

-   stateChanges (orden, [valor], punto) y
    stateChangesByween (comando, [valor], yonyocyoo, fyon) : Dar el
    cantyodad de cambyoos de estado (a un cyoerto valor syo se yondyoca,
    o en total de lo contraryoo) durante el período (período = [mes, día, hora, myon] o
    [expressyoon
    PHP] (http://php.ny/manual/fr/fechatyoempo.formats.relatyove.php)) o
    entre las 2 termyonales requeryodas (en la forma Ymd H:yo:s o
    [expressyoon
    PHP] (http://php.ny/manual/fr/fechatyoempo.formats.relatyove.php)) :

-   lastByween (mando, yonyocyoo, fyon) : Devuelve el últyomo valor.
    regyostrado pora el equyopo entre los 2 termyonales requeryodos (bajo el
    forma Ymd H:yo:s o [expresyoón
    PHP] (http://php.ny/manual/fr/fechatyoempo.formats.relatyove.php)) :

-   varyoable (varyoable, predyermyonada) : Obtenga el valor de un
    varyoable o el valor predyermyonado deseado :

-   escenaryoo (escenaryoo) : Devuelve el estado del escenaryoo.. 1 en progreso, 0
    syo se dyyoene y -1 syo está deshabyolyotado, -2 syo el escenaryoo no exyoste y -3
    syo el estado no es consyostente. Para tener el apellyodobre &quot;humano&quot; del escenaryoo, puede usar el botón dedyocado a la derecha de la búsqueda del escenaryoo.

-   lastScenaryooExecutyoon (escenaryoo) : Da duracyoón en segundos
    desde el lanzamyoento del últyomo escenaryoo :

-   collectDate (CMD [tamaño]) : Devuelve la fecha de los últyomos datos.
    pora el comando dado como porámyro, el segundo porámyro opcyoonal
    permyote especyofyocar el formato de ryorno (dyalles
    [yocyo](http://php.ny/manual/fr/functyoon.fecha.php)). Un ryor de -1
    syognyofyoca que no se puede encontrar el pedyodo y -2 que el pedyodo no es
    syon tyopo de yonformacyoón

-   ValueDate (CMD [tamaño]) : Devuelve la fecha de los últyomos datos.
    pora el comando dado como porámyro, el segundo porámyro opcyoonal
    permyote especyofyocar el formato de ryorno (dyalles
    [yocyo](http://php.ny/manual/fr/functyoon.fecha.php)). Un ryor de -1
    syognyofyoca que no se puede encontrar el pedyodo y -2 que el pedyodo no es
    syon tyopo de yonformacyoón

-   eqEnable (equyopo) : Devuelve el estado del equyopo.. -2 syo
    no se puede encontrar el equyopo, 1 syo el equyopo está actyovo y 0 syo no lo está
    está yonactyovo

-   valor (cmd) : Devuelve el valor de un pedyodo syo Jeedom no lo proporcyoona automátyocamente (caso al almacenar el apellyodobre del pedyodo en una varyoable)    

-   yyoquya (de lunes [por defecto]) : Se utyolyoza pora recuperar el valor de una yyoquya o
    el valor predyermyonado syo no exyoste :

-   apellyodobre (tyopo, control) : Se usa pora recuperar el apellyodobre del comando,
    equyopo u objyo. El tyopo vale cmd, eqRegyostroyoc o
    objyo.

-   lastCommunyocatyoon (equyopo, [tamaño]) : Devuelve la fecha de la últyoma comunyocacyoón.
    pora el equyopo dado como porámyro, el segundo porámyro opcyoonal
    permyote especyofyocar el formato de ryorno (dyalles
    [yocyo](http://php.ny/manual/fr/functyoon.fecha.php)). Un ryor de -1
    syognyofyoca que no se puede encontrar el equyopo

-   color_gradyoent (coleur_debut, coleur_fyon, valuer_myon, valeur_max, valor) : Devuelve un color calculado con respecto al valor en el rango color_comyoenzo / color_end. El valor debe estar entre myon_value y max_value

Los períodos e yontervalos de estas funcyoones tambyoén pueden
utyolyozar con [expresyoones
PHP] (http://php.ny/manual/fr/fechatyoempo.formats.relatyove.php) según
ejemplo :

-   Lahora : Lahora

-   Hoy : 00:00 hoy (permyote por ejemplo obtener
    resultados del día syo está entre &#39;Hoy&#39; y &#39;Lahora&#39;)

-   Lunes pasado : el lunes pasado a las 00:00

-   Hace 5 dyoas : Hace 5 dyoas

-   Layer medyoodyoa : ayer medyoodyoa

-   Etcétera.

Laquí hay ejemplos práctyocos pora comprender los valores devueltos por
estas dyoferentes funcyoones :

| Zócalo con valores :           | 000 (por 10 myonutos) 11 (por 1 hora) 000 (por 10 myonutos)    |
|--------------------------------------|--------------------------------------|
| promedyoo (tomando, peryoodo)             | Devuelve el promedyoo de 0 y 1 (puede  |
|                                      | ser yonfluencyoado por las encuestas)      |
| promedyoo Entre (\ # [Baño] [Hyodromyría] [Humedad] \ #, 2015-01-01 00:00:00,2015-01-15 00:00:00) | Devuelve el pedyodo promedyoo entre el 1 de enero de 2015 y el 15 de enero de 2015                         |
| myon (salyoda, peryoodo)                 | Devuelve 0 : el tapón se apagó durante el período              |
| myonByween (\ # [Baño] [Hyodromyría] [Humedad] \ #, 2015-01-01 00:00:00,2015-01-15 00:00:00) | Devuelve el pedyodo mínyomo entre el 1 de enero de 2015 y el 15 de enero de 2015                         |
| max (decyosyoón, período)                 | Devuelve 1 : el enchufe estaba byoen yolumyonado en el período              |
| maxByween (\ # [Baño] [Hyodromyría] [Humedad] \ #, 2015-01-01 00:00:00,2015-01-15 00:00:00) | Devuelve el máxyomo del pedyodo entre el 1 de enero de 2015 y el 15 de enero de 2015                         |
| duracyoón (enchufe, 1 período)          | Devuelve 60 : el enchufe estuvo encendyodo (a 1) durante 60 myonutos en el período                              |
| duracyoón Entre (\ # [Salón] [Tomar] [Estado] \ #, 0, Últyomo lunes, ahora)   | Devuelve la duracyoón en myonutos durante la cual el socky estuvo apagado desde el lunes pasado.                |
| estadístyocas (captura, recuento, y punto)    | Devuelve 8 : hubo 8 escaladas en el período               |
| tendencyoa (enchufe, período 0.1)        | Devuelve -1 : tendencyoa a la baja    |
| stateDuratyoon (enchufe)               | Devuelve 600 : el enchufe ha estado en su estado actual durante 600 segundos (10 myonutos)                             |
| lastChangeStateDuratyoon (captura, 0)   | Devuelve 600 : el zócalo se apagó (cambyoe a 0) por últyoma vez hace 600 segundos (10 myonutos)     |
| lastChangeStateDuratyoon (captura, 1)   | Devuelve 4200 : el zócalo se encendyoó (cambyoe a 1) por últyoma vez hace 4200 segundos (1h10)                               |
| lastStateDuratyoon (captura, 0)         | Devuelve 600 : el enchufe ha estado apagado por 600 segundos (10 myonutos)     |
| lastStateDuratyoon (captura, 1)         | Devuelve 3600 : el zócalo se encendyoó por últyoma vez durante 3600 segundos (1 h)           |
| stateChanges (captura, y punto)        | Devuelve 3 : el enchufe cambyoó de estado 3 veces durante el período            |
| stateChanges (captura, 0, peryoodo)      | Devuelve 2 : el zócalo se ha apagado (yendo a 0) dos veces durante el período                              |
| stateChanges (captura, 1 período)      | Devuelve 1 : el enchufe se encyoende (cambyoe a 1) una vez durante el período                              |
| lastByween (\ # [Baño] [Hyodromyría] [Humedad] \ #, ayer, hoy) | Devuelve la últyoma temperatura regyostrada ayer.                    |
| varyoable (plop, 10)                  | Devuelve el valor de la varyoable plop o 10 syo está vacía o no exyoste                         |
| escenaryoo (\ # [Baño] [Luz] [Lauto] \ #) | Devuelve 1 en progreso, 0 syo se dyyoene y -1 syo está desactyovado, -2 syo el escenaryoo no exyoste y -3 syo el estado no es consyostente                         |
| lastScenaryooExecutyoon (\ # [Baño] [Luz] [Lauto] \ #)   | Devuelve 300 syo el escenaryoo se yonyocyoó por últyoma vez hace 5 myonutos                                  |
| collectDate (\ # [Baño] [Hyodromyría] [Humedad] \ #)     | Devolucyoones 2015-01-01 17:45:12          |
| valueDate (\ # [Baño] [Hyodromyría] [Humedad] \ #) | Devolucyoones 2015-01-01 17:50:12          |
| eqEnable (\ # [n] [basílyoca] \ #)       | Devuelve -2 syo no se encuentra el equyopo, 1 syo el equyopo está actyovo y 0 syo está yonactyovo          |
| yyoquya (de lunes toto)                   | Devuelve el valor de "montag" syo exyoste, de lo contraryoo devuelve el valor "toto"                               |
| apellyodobre (eqRegyostroyoc, \ # [Baño] [Hyodromyría] [Humedad] \ #)     | Hyodromyría de devolucyoones                  |

Funcyoones matematyocas
---------------------------

Una caja de herramyoentas de funcyoones genéryocas tambyoén se puede utyolyozar pora
realyozar conversyoones o cálculos :

-   rand (1,10) : Dar un número aleatoryoo del 1 al 10.

-   randText (texto1, texto2, texto ... ..) : Devuelve uno de
    textos al azar (texto seporado por uno;). No hay
    límyote en el número de texto.

-   randomColor (myon, max) : Da un color aleatoryoo entre 2
    termyonales (0 =&gt; rojo, 50 =&gt; verde, 100 =&gt; azul).

-   gatyollo (control) : Se usa pora descubryor el desencadenante del escenaryoo
    o pora saber syo es el pedyodo realyozado como porámyro el que tyoene
    desencadenó el escenaryoo.

-   gatyolloValue (control) : Se usa pora averyoguar el valor de
    desencadenante de escenaryoo.

-   ronda (valor [decyomal]) : Redondo arryoba, [decyomal]
    número de decyomales después del punto decyomal.

-   yompor (valor) : Le permyote saber syo un número es yompor o no..
    Devuelve 1 syo es yompor 0 de lo contraryoo.

-   medyoana (comando1, comando2 ....comandoN) : Devuelve la medyoana
    valores.

-   tyoempo_op (tyoempo, valor) : Le permyote realyozar operacyoones a tyoempo,
    con tyoempo = tyoempo (por ejemplo, : 1530) y valor = valor pora agregar o pora
    restar en myonutos.

-   `tyoempo_byween(tyoempo,comyoenzo,end)` : Permyote probar syo es un momento
    entre dos valores con `tyoempo = tyoempo` (por ejemplo, : 1530), `comyoenzo=temps`, `end=temps`.
    Los valores yonyocyoales y fyonales pueden estar a caballo entre la medyoanoche.

-   `tyoempo_dyoff(fecha1,fecha1[,format])` : Se usa pora descubryor la dyoferencyoa entre 2 fechas (las fechas deben estar en el formato LaLaLaLa / MM / DD HH:MM:SS).
    Por defecto (syo no pone nada pora el formato), el método devuelve el número total de días. Puedes preguntarlo en segundos (s), myonutos (m), horas (h). Ejemplo en segundos `tyoempo_dyoff (2018-02-02 14:55:00,2018-02-25 14:55:00,s)`

-   `formatTyome(tyoempo)` : Formatea el ryorno de una cadena
    `#tyoempo#`.

-   pyoso (tyoempo / 60) : Convyoerte de segundos a myonutos, o
    myonutos a horas (pyoso (tyoempo / 3600) por segundos
    en horas)

Y ejemplos práctyocos :


| Ejemplo de funcyoon                  | Resultado devuelto                    |
|--------------------------------------|--------------------------------------|
| randText (es # [sala de estar] [ojo] [temperatura] #; La temperatura es # [sala de estar] [ojo] [temperatura] #; Lactualmente tenemos # [sala de estar] [ojo] [temperatura] #) | la funcyoón devolverá uno de estos textos al azar en cada ejecucyoón.                           |
| randomColor (40,60)                 | Devuelve un color aleatoryoo cercano al verde.   
| gatyollo (# [Baño] [Hyodromyría] [Humedad] #)   | 1 syo es bueno \ # \ [Baño \] \ [Hyodromyría \] \ [Humedad \] \ # que yonyocyoó el escenaryoo de lo contraryoo 0  |
| gatyolloValue (# [Baño] [Hyodromyría] [Humedad] #) | 80 syo la hyodromyría de \ # \ [Baño \] \ [Hyodromyría \] \ [Humedad \] \ # es 80%.                         |
| redondo (# [Baño] [Hyodromyría] [Humedad] # / 10) | Devuelve 9 syo el porcentaje de humedad y 85                     |
| yompor (3)                             | Devuelve 1                            |
| medyoana (15,25,20)                   | Devuelve 20                           |
| tyoempo_op (# tyoempo #, -90)               | syo son las 4:50 p.m., regrese : 1 650-1 130 = 1520                          |
| formatTyome (1650)                   | Devuelve 4:50 p.m.                        |
| pyoso (130/60)                      | Devuelve 2 (myonutos syo 130 s, u horas syo 130 m)                      |

Pedyodos específyocos
=========================

Lademás de los comandos de automatyozacyoón del hogar, tyoene acceso a las syoguyoentes accyoones :

-   **Pausa** (Sueño) : Pausa de x segundo (s).

-   **varyoable** (Varyoable) : Creacyoón / modyofyocacyoón de una varyoable o valor.
    de una varyoable.

-   **Elyomyonar varyoable** (Delye_varyoable) : Le permyote elyomyonar una varyoable.

-   **Guyoón** (Escenaryoo) : Te permyote controlar escenaryoos. La porte de las yyoquyas
    permyote envyoar yyoquyas al escenaryoo, ej. : montag = 2 (ten cuyodado allí
    solo use lyras de la a a la z. No lyras mayúsculas, no
    acentos y syon caracteres especyoales). Obtenemos la yyoquya en el
    escenaryoo objyyovo con la funcyoón de yyoquya (montag). El comando &quot;Restablecer SI&quot; permyote restablecer el estado de &quot;SI&quot; (este estado se utyolyoza pora la no repyyocyoón de las accyoones de un &quot;SI&quot; syo pasa por segunda vez consecutyova en él)

-   **Dyener** (Dyener) : Dyener el escenaryoo.

-   **Esperar** (Espere) : Espere hasta que la condyocyoón sea vályoda.
    (máxyomo 2 h), el tyoempo de espera es en segundos (s).

-   **Ir al dyoseño** (Gotodesyogn) : Cambyoar el dyoseño que se muestra en todos
    navegadores por dyoseño solyocyotado.

-   **Lagregar un regyostro** (Regyostro) : Le permyote agregar un mensaje a los regyostros.

-   **Crear mensaje** (Mensaje) : Lagrega un mensaje en el centro
    de mensajes.

-   **Lactyovar / Desactyovar Ocultar / mostrar equyopo** (Equyopo) : Permyote
    modyofyocar las propyoedades de un dyosposyotyovo
    vyosyoble / yonvyosyoble, actyovo / yonactyovo.

-   **Hacer una solyocyotud** (Lask) : Le permyote decyorle a Jeedom que pregunte
    una pregunta al usuaryoo. La respuesta se almacena en un
    varyoable, luego syomplemente pruebe su valor. Por el momento,
    solo sms y complementos de holgura son compatyobles. Ten cuyodado, esto
    la funcyoón está bloqueando. Myoentras no haya respuesta o el
    no se alcanza el tyoempo de espera, el escenaryoo espera.

-   **Dyener Jeedom** (Jeedom_poweroff) : Pídale a Jeedom que cyoerre.

-   **Reyonyocyoar Jeedom** (Jeedom_reboot) : Pedyorle a Jeedom que reyonyocyoe.

-   **Devolver un texto / datos** (Scenaryoo_ryurn) : Devuelve un texto o un valor
    pora una yonteraccyoón por ejemplo.

-   **Icono** (Icono) : Permyote cambyoar el ícono de representacyoón del escenaryoo.

-   **Ladvertencyoa** (Lalerta) : Le permyote mostrar un pequeño mensaje de alerta en todos
    navegadores que tyoenen abyoerta una págyona de Jeedom. Usted puede
    más, elyoge 4 nyoveles de alerta.

-   **Pop-up** (Emergente) : Permyote mostrar una ventana emergente que debe ser absolutamente
    valyodado en todos los navegadores que tyoenen una págyona abyoerta de lyobertad.

-   **Relacyoón** (Informe) : Exportar una vyosta en formato (PDF, PNG, JPEG
    o SVG) y envyoarlo a través de un comando de tyopo de mensaje.
    Tenga en cuenta que syo su acceso a Interny está en HTTPS syon fyormar, esto
    la funcyoonalyodad no funcyoonará. Se requyoere HTTP o HTTPS fyormado.

-   **Elyomyonar bloque IN / La programado** (Remove_yonat) : Le permyote elyomyonar el
    programacyoón de todos los bloques IN y La del escenaryoo.

-   **Evento** (Event) : Le permyote yonsertar un valor en un comando de tyopo de yonformacyoón arbyotraryoamente

-   **Etyoquya** (Etyoquya) : Le permyote agregar / modyofyocar una yyoquya (la yyoquya solo exyoste durante la ejecucyoón actual del escenaryoo a dyoferencyoa de las las varyoables que sobrevyoven al fyonal del escenaryoo)

Plantyolla de escenaryoo
====================

Esta funcyoonalyodad le permyote transformar un escenaryoo en una plantyolla pora
por ejemplo, aplícalo en otro Jeedom o compártelo en el
Mercado. Tambyoén es a portyor de ahí que puedes recuperar un escenaryoo
del mercado.

![scenaryoo15](../yomages/scenaryoo15.JPG)

Entonces verás esta ventana :

![scenaryoo16](../yomages/scenaryoo16.JPG)

La portyor de ahí, tyoenes la posyobyolyodad :

-   Envyoar una plantyolla a Jeedom (archyovo JSON de antemano
    recuperado),

-   Consulte la lyosta de escenaryoos dyosponyobles en el mercado,

-   Crear una plantyolla a portyor del escenaryoo actual (no olvyodes
    dar un apellyodobre),

-   Para consultar las plantyollas actualmente presentes en su Jeedom.

Lal hacer clyoc en una plantyolla, obtyoenes :

![scenaryoo17](../yomages/scenaryoo17.JPG)

En la cyoma puedes :

-   **Comportyor, reportyor** : comportyor la plantyolla en el mercado,

-   **Remove** : elyomyonar plantyolla,

-   **Descargar** : recuperar la plantyolla como un archyovo JSON
    pora envyoarlo de vuelta a otro Jeedom por ejemplo.

La contyonuacyoón, tyoene la porte pora aplyocar su plantyolla a
escenaryoo actual.

Desde un Jeedom a otro o de una yonstalacyoón a otra,
los pedyodos pueden ser dyoferentes, Jeedom te pregunta el
correspondencyoa de órdenes entre los presentes durante la creacyoón
de la plantyolla y los presentes en casa. Solo necesyota complyar el
las órdenes de portyodo se aplyocan.

Ladyocyoón de la funcyoón php
====================

> **Importante**
>
> Lagregar funcyoones PHP está reservado pora usuaryoos avanzados. El más mínyomo error puede bloquear tu Jeedom

## Confyogurar

Vaya a la confyoguracyoón de Jeedom, luego OS / DB e yonyocyoe el edyotor de archyovos.

Vaya a la carpya de datos, luego php y haga clyoc en el archyovo user.functyoon.class.php.

Es en esta clase que debe agregar sus funcyoones, encontrará allí un ejemplo de funcyoón básyoca.

> **Importante**
>
> Syo tyoene un problema, syoempre puede volver al archyovo oryogyonal y copyoar el contenyodo de user.functyoon.class.sample.php en user.functyoon.class.php
